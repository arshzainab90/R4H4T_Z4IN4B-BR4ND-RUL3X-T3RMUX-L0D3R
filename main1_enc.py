#ENCODED BY : LEGEND MAJNU K1NG
#ENCRYPTION : Py3 BASE64
#GITHUB : https://github.com/LEGEND MAJNU K1NG
#----------------------------------------------
import base64
exec(base64.b64decode(b'aW1wb3J0IGJhc2U2NAppbXBvcnQganNvbgppbXBvcnQgcmUKaW1wb3J0IHV1aWQKaW1wb3J0IGlvCmltcG9ydCBzdHJ1Y3QKaW1wb3J0IHRpbWUKaW1wb3J0IHVybGxpYjMKaW1wb3J0IHJlcXVlc3RzCmltcG9ydCBjb2xvcmFtYQpmcm9tIGNvbG9yYW1hIGltcG9ydCBGb3JlLCBCYWNrLCBTdHlsZSwgaW5pdApmcm9tIENyeXB0by5DaXBoZXIgaW1wb3J0IEFFUywgUEtDUzFfdjFfNQpmcm9tIENyeXB0by5QdWJsaWNLZXkgaW1wb3J0IFJTQQpmcm9tIENyeXB0by5SYW5kb20gaW1wb3J0IGdldF9yYW5kb21fYnl0ZXMKaW1wb3J0IHB5b3RwCmltcG9ydCByYW5kb20KaW1wb3J0IHN0cmluZwppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIHVybGxpYi5wYXJzZSBpbXBvcnQgdXJscGFyc2UsIHBhcnNlX3FzLCB1bnF1b3RlLCBxdW90ZQppbXBvcnQgcHlmaWdsZXQKaW1wb3J0IHJpY2gKZnJvbSByaWNoIGltcG9ydCBib3gKZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZXRpbWUKZnJvbSByaWNoLmNvbnNvbGUgaW1wb3J0IENvbnNvbGUKZnJvbSByaWNoLnBhbmVsIGltcG9ydCBQYW5lbAppbXBvcnQgbWFyc2hhbAppbXBvcnQgemxpYgpmcm9tIHJpY2gudGV4dCBpbXBvcnQgVGV4dAppbXBvcnQgc2lnbmFsCmltcG9ydCBzdWJwcm9jZXNzCmltcG9ydCBoYXNobGliCmZyb20gcmVxdWVzdHMgaW1wb3J0IGV4Y2VwdGlvbnMKCnVybGxpYjMuZGlzYWJsZV93YXJuaW5ncyh1cmxsaWIzLmV4Y2VwdGlvbnMuSW5zZWN1cmVSZXF1ZXN0V2FybmluZykKaW5pdChhdXRvcmVzZXQ9VHJ1ZSkKY29uc29sZSA9IENvbnNvbGUoKQoKU0FWRV9ESVIgPSAnL3NkY2FyZC9FbmNyeXB0ZWRGaWxlcycKR0lUSFVCX0FQUFJPVkFMX1VSTCA9ICdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vYXJzaHphaW5hYjkwL0FwcnV2YWwudHh0L21haW4vYXBwcm92YWwudHh0JwoKUkVEID0gJ1x4MWJbMTszMW0nCkdSRUVOID0gJ1x4MWJbMTszMm0nCllFTExPVyA9ICdceDFiWzE7MzNtJwpCTFVFID0gJ1x4MWJbMTszNG0nCk1BR0VOVEEgPSAnXHgxYlsxOzM1bScKQ1lBTiA9ICdceDFiWzE7MzZtJwpXSElURSA9ICdceDFiWzE7MzdtJwpSRVNFVCA9ICdceDFiWzBtJwoKUFJJTUFSWV9DT0xPUiA9IEZvcmUuQ1lBTgpJTlBVVF9DT0xPUiA9IEZvcmUuWUVMTE9XCkxJTkVfQ09MT1IgPSBGb3JlLk1BR0VOVEEKRVJST1JfQ09MT1IgPSBGb3JlLlJFRApTVUNDRVNTX0NPTE9SID0gRm9yZS5HUkVFTgpXSElURV9DT0xPUiA9IEZvcmUuV0hJVEUKClVTRVJfQUdFTlRTID0gWwogICAgJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS85MS4wLjQ0NzIuMTI0IFNhZmFyaS81MzcuMzYnLAogICAgJ01vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCAxMDsgU00tRzk3M0YpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS84OS4wLjQzODkuNzIgTW9iaWxlIFNhZmFyaS81MzcuMzYnLAogICAgJ01vemlsbGEvNS4wIChNYWNpbnRvc2g7IEludGVsIE1hYyBPUyBYIDEwXzE1XzcpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS85Mi4wLjQ1MTUuMTU5IFNhZmFyaS81MzcuMzYnCl0KCkVOQUJMRV9QUk9YWSA9IEZhbHNlClBST1hJRVMgPSBbXQoKZGVmIGdldF9yYW5kb21fcHJveHkoKToKICAgIGlmIEVOQUJMRV9QUk9YWSBhbmQgUFJPWElFUzoKICAgICAgICByZXR1cm4gewogICAgICAgICAgICAnaHR0cCc6IHJhbmRvbS5jaG9pY2UoUFJPWElFUyksCiAgICAgICAgICAgICdodHRwcyc6IHJhbmRvbS5jaG9pY2UoUFJPWElFUykKICAgICAgICB9CiAgICByZXR1cm4gTm9uZQoKZGVmIGNsZWFyX3NjcmVlbigpOgogICAgaWYgb3MubmFtZSA9PSAncG9zaXgnOgogICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgZWxzZToKICAgICAgICBvcy5zeXN0ZW0oJ2NscycpCgpkZWYgcHJpbnRfc3R5bGlzaF9saW5lKCk6CiAgICBwcmludChTdHlsZS5CUklHSFQgKyBGb3JlLkNZQU4gKyAn4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBJyArIFN0eWxlLlJFU0VUX0FMTCkKCmRlZiBib2xkX3VuaWNvZGUodGV4dCk6CiAgICByZXR1cm4gZiJcMDMzWzFte3RleHR9XDAzM1swbSIKCmRlZiBiYW5uZXIoKToKICAgIGNsZWFyX3NjcmVlbigpCiAgICB0cnk6CiAgICAgICAgdGV4dCA9IHB5ZmlnbGV0LmZpZ2xldF9mb3JtYXQoJ1JhaGF0WmFpbmFiJywgZm9udD0nc29mdCcpCiAgICBleGNlcHQ6CiAgICAgICAgdGV4dCA9ICJSYWhhdFphaW5hYiIKICAgIGxpbmVzID0gdGV4dC5zcGxpdCgnXG4nKQogICAgY29sb3JzID0gW0ZvcmUuTElHSFRDWUFOX0VYLCBGb3JlLkxJR0hUTUFHRU5UQV9FWCwgRm9yZS5ZRUxMT1csIEZvcmUuUkVELCBGb3JlLkxJR0hUR1JFRU5fRVgsIEZvcmUuQ1lBTiwgRm9yZS5NQUdFTlRBXQogICAgZm9yIGksIGxpbmUgaW4gZW51bWVyYXRlKGxpbmVzKToKICAgICAgICBpZiBsaW5lLnN0cmlwKCk6CiAgICAgICAgICAgIHByaW50KFN0eWxlLkJSSUdIVCArIGNvbG9yc1tpICUgbGVuKGNvbG9ycyldICsgbGluZSkKCmRlZiBnZXRfdW5pcXVlX2lkKCk6CiAgICB0cnk6CiAgICAgICAgdW5pcXVlX3N0ciA9IHN0cihvcy5nZXR1aWQoKSkgKyBvcy5nZXRsb2dpbigpIGlmIG9zLm5hbWUgIT0gJ250JyBlbHNlIHN0cihvcy5nZXRsb2dpbigpKQogICAgICAgIHJldHVybiBoYXNobGliLnNoYTI1Nih1bmlxdWVfc3RyLmVuY29kZSgpKS5oZXhkaWdlc3QoKQogICAgZXhjZXB0OgogICAgICAgIHJldHVybiBoYXNobGliLnNoYTI1NihzdHIodXVpZC5nZXRub2RlKCkpLmVuY29kZSgpKS5oZXhkaWdlc3QoKQoKZGVmIHNlbmRfYXBwcm92YWxfcmVxdWVzdCh1bmlxdWVfa2V5KToKICAgIG1lc3NhZ2UgPSBmIkhlbGxvIFJhaGF0IFphxKtuYWIgU8SrxKtyISEgUGxlYXNlIEFwcHJvdmUgTXkgVG9rZW46IHt1bmlxdWVfa2V5fSIKICAgIHVybCA9IGYiaHR0cHM6Ly93YS5tZS8rOTE3ODE4OTU2NjE0P3RleHQ9e3F1b3RlKG1lc3NhZ2UpfSIKICAgIHRyeToKICAgICAgICBvcy5zeXN0ZW0oZiJhbSBzdGFydCAne3VybH0nID4vZGV2L251bGwgMj4mMSIpCiAgICBleGNlcHQ6CiAgICAgICAgcGFzcwoKZGVmIGNoZWNrX3Blcm1pc3Npb24odW5pcXVlX2tleSk6CiAgICBhcHByb3ZlZCA9IEZhbHNlCiAgICBhcHByb3ZhbF9yZXF1ZXN0ZWQgPSBGYWxzZQogICAgcHJpbnQoU3R5bGUuQlJJR0hUICsgRm9yZS5DWUFOICsgJ1vigKJdIENoZWNraW5nIEFwcHJvdmFsLi4uJykKICAgIHdoaWxlIG5vdCBhcHByb3ZlZDoKICAgICAgICB0cnk6CiAgICAgICAgICAgIHJlc3BvbnNlID0gcmVxdWVzdHMuZ2V0KEdJVEhVQl9BUFBST1ZBTF9VUkwpCiAgICAgICAgICAgIGlmIHJlc3BvbnNlLnN0YXR1c19jb2RlID09IDIwMDoKICAgICAgICAgICAgICAgIGRhdGEgPSByZXNwb25zZS50ZXh0CiAgICAgICAgICAgICAgICBpZiB1bmlxdWVfa2V5IGluIGRhdGE6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQoU3R5bGUuQlJJR0hUICsgRm9yZS5HUkVFTiArICdb4pyTXSBZb3VyIEFwcHJvdmFsIHN1Y2Nlc3NmdWwuJykKICAgICAgICAgICAgICAgICAgICBhcHByb3ZlZCA9IFRydWUKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgZWxpZiBub3QgYXBwcm92YWxfcmVxdWVzdGVkOgogICAgICAgICAgICAgICAgICAgIHByaW50KFN0eWxlLkJSSUdIVCArIEZvcmUuR1JFRU4gKyAnW+KAol0gV2FpdGluZyBGb3IgQXBwcm92YWwuLi4nKQogICAgICAgICAgICAgICAgICAgIHByaW50X3N0eWxpc2hfbGluZSgpCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoU3R5bGUuQlJJR0hUICsgRm9yZS5ZRUxMT1cgKyBmJ1shXSBZb3VyIEtleToge3VuaXF1ZV9rZXl9JykKICAgICAgICAgICAgICAgICAgICBhcHByb3ZhbF9yZXF1ZXN0ZWQgPSBUcnVlCiAgICAgICAgICAgICAgICAgICAgc2VuZF9hcHByb3ZhbF9yZXF1ZXN0KHVuaXF1ZV9rZXkpCiAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBwcmludChmIlvinJhdIEZhaWxlZCB0byBmZXRjaCBhcHByb3ZhbCBsaXN0LiBTdGF0dXMgQ29kZToge3Jlc3BvbnNlLnN0YXR1c19jb2RlfSIpCiAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEwKQogICAgICAgIGV4Y2VwdCByZXF1ZXN0cy5SZXF1ZXN0RXhjZXB0aW9uOgogICAgICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgICAgIGNvbnRpbnVlCgpkZWYgcHJpbnRfZGV2ZWxvcGVyX2luZm8oKToKICAgIGNvbnNvbGUucHJpbnQoUGFuZWwoCiAgICAgICAgZiJ7UkVEfVvigKJdIERldmVsb3BlciAgICDilrYge0dSRUVOfUFSU0ggQUxJWUEgICAgICAgICAgICAgICAgICBcbiIKICAgICAgICBmIntHUkVFTn1b4oCiXSBGYWNlYm9vayAgICAg4pa2IHtSRUR9S0hPTkkgREFSSU5EQSBBUlNIIEJBQkEgICAgICAgICAgICBcbiIKICAgICAgICBmIntZRUxMT1d9W+KAol0gR2l0aHViICAgICAgIOKWtiB7QkxVRX1hcnNoemFpbmFiOTAgICAgICAgICAgICAgIFxuIgogICAgICAgIGYie0JMVUV9W+KAol0gVGVhbSAgICAgICAgIOKWtiB7WUVMTE9XfXJhaGF0IFphaW5hYiBydWxleCAgICAgICAgICAgICAgICAgIiwKICAgICAgICB0aXRsZT1mIntDWUFOfURldmVsb3BlciBJbmZvIiwKICAgICAgICBzdWJ0aXRsZT1mIntDWUFOfXJhaGF0emFpbmFicnVsZXgiLAogICAgICAgIHN0eWxlPSJib2xkIGN5YW4iLAogICAgICAgIHdpZHRoPTcwCiAgICApKQoKZGVmIHByaW50X3Rvb2xfaW5mbygpOgogICAgY29uc29sZS5wcmludChQYW5lbCgKICAgICAgICBmIntCTFVFfVvigKJdIFRvb2wgVHlwZSAgICDilrYge1lFTExPV31UZXJtdXggUG9zdCBDb252byAgICAgICAgXG4iCiAgICAgICAgZiJ7R1JFRU59W+KAol0gVmVyc2lvbiAgICAgIOKWtiB7QkxVRX04LjA3LjA2ICAgICAgICAgICAgICAgICAgXG4iCiAgICAgICAgZiJ7WUVMTE9XfVvigKJdIFVwZGF0ZXMgICAgICDilrYge01BR0VOVEF9TGFzdCBVcGRhdGUgT24gMjkvRGVjLzIwMjUiLAogICAgICAgIHRpdGxlPWYie0NZQU59VG9vbCBJbmZvIiwKICAgICAgICBzdHlsZT0iYm9sZCBjeWFuIiwKICAgICAgICB3aWR0aD03MAogICAgKSkKCmRlZiBwcmludF9zdWJzY3JpcHRpb25faW5mbygpOgogICAgY29uc29sZS5wcmludChQYW5lbCgKICAgICAgICBmIntSRUR9W+KAol0gQWNjZXNzIFR5cGUgIOKWtiB7R1JFRU59UGFpZCBUb29sICAgICAgICAgICAgICAgIFxuIgogICAgICAgIGYie0dSRUVOfVvigKJdIE1vbnRobHkgUGxhbiDilrYge1lFTExPV30xNTAgUnMgLyBNb250aCAgICAgICAgICAgXG4iCiAgICAgICAgZiJ7WUVMTE9XfVvigKJdIFllYXJseSBQbGFuICDilrYge01BR0VOVEF9MTUwMCBScyAvIFllYXIgICAgICAgICAgICIsCiAgICAgICAgdGl0bGU9ZiJ7Q1lBTn1TdWJzY3JpcHRpb24gSW5mbyIsCiAgICAgICAgc3R5bGU9ImJvbGQgY3lhbiIsCiAgICAgICAgd2lkdGg9NzAKICAgICkpCgpkZWYgcHJpbnRfdGltZV9pbmZvKCk6CiAgICBub3cgPSBkYXRldGltZS5ub3coKQogICAgZGF0ZSA9IG5vdy5zdHJmdGltZSgnJVktJW0tJWQnKQogICAgdGltZV9zdHIgPSBub3cuc3RyZnRpbWUoJyVJOiVNOiVTICVwJykKICAgIGNvbnNvbGUucHJpbnQoUGFuZWwoCiAgICAgICAgZiJ7UkVEfVvigKJdIFRpbWUgTm93ICAgICDilrYge0NZQU59e3RpbWVfc3RyfSAgICAgICAgICAgICAgICBcbiIKICAgICAgICBmIntZRUxMT1d9W+KAol0gVG9kYXkgRGF0ZSAgIOKWtiB7Q1lBTn17ZGF0ZX0gICAgICAgICAgICAgICAgICAgICIsCiAgICAgICAgdGl0bGU9ZiJ7Q1lBTn1Ub2RheSBUaW1lIiwKICAgICAgICBzdHlsZT0iYm9sZCBjeWFuIiwKICAgICAgICB3aWR0aD03MAogICAgKSkKCmRlZiBwcmludF9pcF9pbmZvKCk6CiAgICB0cnk6CiAgICAgICAgcmVzID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2lwaW5mby5pby9qc29uJywgdGltZW91dD0zKQogICAgICAgIGRhdGEgPSByZXMuanNvbigpCiAgICAgICAgaXAgPSBkYXRhLmdldCgnaXAnLCAnVW5rbm93bicpCiAgICAgICAgY291bnRyeSA9IGRhdGEuZ2V0KCdjb3VudHJ5JywgJ1Vua25vd24nKQogICAgICAgIHJlZ2lvbiA9IGRhdGEuZ2V0KCdyZWdpb24nLCAnVW5rbm93bicpCiAgICAgICAgY2l0eSA9IGRhdGEuZ2V0KCdjaXR5JywgJ1Vua25vd24nKQogICAgICAgIGNvbnNvbGUucHJpbnQoUGFuZWwoCiAgICAgICAgICAgIGYie0dSRUVOfVvigKJdIElQICAgICAgICAgICDilrYge2lwfVxuIgogICAgICAgICAgICBmIntHUkVFTn1b4oCiXSBDb3VudHJ5ICAgICAg4pa2IHtjb3VudHJ5fVxuIgogICAgICAgICAgICBmIntHUkVFTn1b4oCiXSBSZWdpb24gICAgICAg4pa2IHtyZWdpb259XG4iCiAgICAgICAgICAgIGYie0dSRUVOfVvigKJdIENpdHkgICAgICAgICDilrYge2NpdHl9biIsCiAgICAgICAgICAgIHRpdGxlPWYie0NZQU59SVAgSW5mbyIsCiAgICAgICAgICAgIHN0eWxlPSJib2xkIGN5YW4iLAogICAgICAgICAgICB3aWR0aD03MAogICAgICAgICkpCiAgICBleGNlcHQ6CiAgICAgICAgcGFzcwoKZGVmIGRpc3BsYXlfYm94ZXMoKToKICAgIHByaW50X2RldmVsb3Blcl9pbmZvKCkKICAgIHByaW50X3Rvb2xfaW5mbygpCiAgICBwcmludF90aW1lX2luZm8oKQogICAgcHJpbnRfc3Vic2NyaXB0aW9uX2luZm8oKQogICAgcHJpbnRfaXBfaW5mbygpCgpkZWYgY2hlY2tfcGFzc3dvcmQoKToKICAgIHBhc3N3b3JkID0gJ0FOU0ggTkFNQVJEIEtBIEJBUCcKICAgIGF0dGVtcHRzID0gMwogICAgd2hpbGUgYXR0ZW1wdHMgPiAwOgogICAgICAgIHByaW50X3N0eWxpc2hfbGluZSgpCiAgICAgICAgZW50ZXJlZF9wYXNzd29yZCA9IGlucHV0KFN0eWxlLkJSSUdIVCArIEZvcmUuWUVMTE9XICsgJ1vigKJdIEVOVEVSIFBBU1NXT1JEIOKWtiAnKQogICAgICAgIGlmIGVudGVyZWRfcGFzc3dvcmQgPT0gcGFzc3dvcmQ6CiAgICAgICAgICAgIHByaW50KFN0eWxlLkJSSUdIVCArIEZvcmUuR1JFRU4gKyAnW+Kck10gUGFzc3dvcmQgY29ycmVjdCEgUHJvY2VlZGluZy4uLicpCiAgICAgICAgICAgIHByaW50X3N0eWxpc2hfbGluZSgpCiAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgYXR0ZW1wdHMgLT0gMQogICAgICAgIHByaW50KFN0eWxlLkJSSUdIVCArIEZvcmUuUkVEICsgZidb4pyXXSBJbmNvcnJlY3QgcGFzc3dvcmQhIFlvdSBoYXZlIHthdHRlbXB0c30gYXR0ZW1wdHMgbGVmdC4nKQogICAgICAgIHByaW50X3N0eWxpc2hfbGluZSgpCiAgICBwcmludChTdHlsZS5CUklHSFQgKyBGb3JlLlJFRCArICdb4pyXXSBUb28gbWFueSBpbmNvcnJlY3QgYXR0ZW1wdHMuIEV4aXRpbmcnKQogICAgcHJpbnRfc3R5bGlzaF9saW5lKCkKICAgIHN5cy5leGl0KDEpCgpkZWYgdmFsaWRhdGVfdG9rZW5zKHRva2VuX2ZpbGUpOgogICAgdmFsaWRfdG9rZW5zID0gW10KICAgIGludmFsaWRfdG9rZW5zID0gW10KICAgIHRyeToKICAgICAgICB3aXRoIG9wZW4odG9rZW5fZmlsZSwgJ3InKSBhcyBmOgogICAgICAgICAgICB0b2tlbnMgPSBmLnJlYWQoKS5zcGxpdGxpbmVzKCkKICAgICAgICBmb3IgaWR4LCB0b2tlbiBpbiBlbnVtZXJhdGUodG9rZW5zLCAxKToKICAgICAgICAgICAgaWYgbm90IHRva2VuLnN0cmlwKCk6IGNvbnRpbnVlCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHVybCA9IGYiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vbWU/YWNjZXNzX3Rva2VuPXt0b2tlbn0iCiAgICAgICAgICAgICAgICByZXNwb25zZSA9IHJlcXVlc3RzLmdldCh1cmwpCiAgICAgICAgICAgICAgICBpZiByZXNwb25zZS5zdGF0dXNfY29kZSA9PSAyMDA6CiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHJlc3BvbnNlLmpzb24oKQogICAgICAgICAgICAgICAgICAgIG5hbWUgPSBkYXRhLmdldCgnbmFtZScsICdVbmtub3duIFVzZXInKQogICAgICAgICAgICAgICAgICAgIHZhbGlkX3Rva2Vucy5hcHBlbmQoKGlkeCwgdG9rZW4sIG5hbWUpKQogICAgICAgICAgICAgICAgICAgIHByaW50KGYie0dSRUVOfVvinJNdIFRva2VuIHtpZHh9IFZhbGlkOiB7bmFtZX0iKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBpbnZhbGlkX3Rva2Vucy5hcHBlbmQodG9rZW4pCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoZiJ7UkVEfVvinJddIFRva2VuIHtpZHh9IEludmFsaWQiKQogICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICBpbnZhbGlkX3Rva2Vucy5hcHBlbmQodG9rZW4pCiAgICBleGNlcHQgRmlsZU5vdEZvdW5kRXJyb3I6CiAgICAgICAgcHJpbnQoZiJ7UkVEfVvinJddIEZpbGUgbm90IGZvdW5kOiB7dG9rZW5fZmlsZX0iKQogICAgcmV0dXJuIHZhbGlkX3Rva2VucywgaW52YWxpZF90b2tlbnMKCmRlZiBzZW5kX21lc3NhZ2VzKHZhbGlkX3Rva2VucywgdGhyZWFkX2lkLCBoYXRlcnNfbmFtZSwgbWVzc2FnZXMsIGRlbGF5KToKICAgIGlmIG5vdCB2YWxpZF90b2tlbnMgb3Igbm90IG1lc3NhZ2VzOgogICAgICAgIHJldHVybgogICAgcHJpbnRfc3R5bGlzaF9saW5lKCkKICAgIG1lc3NhZ2VfaWR4ID0gMAogICAgdG9rZW5faWR4ID0gMAogICAgd2hpbGUgVHJ1ZToKICAgICAgICB0cnk6CiAgICAgICAgICAgIHRva2VuID0gdmFsaWRfdG9rZW5zW3Rva2VuX2lkeF1bMV0KICAgICAgICAgICAgYWNjb3VudF9uYW1lID0gdmFsaWRfdG9rZW5zW3Rva2VuX2lkeF1bMl0KICAgICAgICAgICAgbXNnX3RleHQgPSBtZXNzYWdlc1ttZXNzYWdlX2lkeF0KICAgICAgICAgICAgZmluYWxfbWVzc2FnZSA9IGYie2hhdGVyc19uYW1lfSB7bXNnX3RleHR9IgogICAgICAgICAgICB1cmwgPSBmImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL3YxNS4wL3Rfe3RocmVhZF9pZH0vbWVzc2FnZXMiCiAgICAgICAgICAgIGhlYWRlcnMgPSB7CiAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGYnQmVhcmVyIHt0b2tlbn0nLAogICAgICAgICAgICAgICAgJ1VzZXItQWdlbnQnOiByYW5kb20uY2hvaWNlKFVTRVJfQUdFTlRTKSwKICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgICAgICAgICAgfQogICAgICAgICAgICBkYXRhID0geydtZXNzYWdlJzogZmluYWxfbWVzc2FnZX0KICAgICAgICAgICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5wb3N0KHVybCwgaGVhZGVycz1oZWFkZXJzLCBqc29uPWRhdGEpCiAgICAgICAgICAgIHRpbWVzdGFtcCA9IGRhdGV0aW1lLm5vdygpLnN0cmZ0aW1lKCclWS0lbS0lZCAlSDolTTolUycpCiAgICAgICAgICAgIHByaW50X3N0eWxpc2hfbGluZSgpCiAgICAgICAgICAgIHByaW50KFN0eWxlLkJSSUdIVCArIFNVQ0NFU1NfQ09MT1IgKyBmJ1vigKJdIFRocmVhZCBJRCAg4pa2IHt0aHJlYWRfaWR9JykKICAgICAgICAgICAgcHJpbnQoU3R5bGUuQlJJR0hUICsgU1VDQ0VTU19DT0xPUiArIGYnW+KAol0gU2VuZGVyICAgICDilrYge2FjY291bnRfbmFtZX0nKQogICAgICAgICAgICBwcmludChTdHlsZS5CUklHSFQgKyBTVUNDRVNTX0NPTE9SICsgZidb4oCiXSBUaW1lICAgICAgIOKWtiB7dGltZXN0YW1wfScpCiAgICAgICAgICAgIGlmIHJlc3BvbnNlLnN0YXR1c19jb2RlID09IDIwMDoKICAgICAgICAgICAgICAgIHByaW50KFN0eWxlLkJSSUdIVCArIFNVQ0NFU1NfQ09MT1IgKyAnW+Kck10gU3RhdHVzICAgICDilrYgTWVzc2FnZSBTZW50IFN1Y2Nlc3NmdWxseScpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBwcmludChTdHlsZS5CUklHSFQgKyBFUlJPUl9DT0xPUiArIGYnW+Kcl10gU3RhdHVzICAgICDilrYgTWVzc2FnZSBGYWlsZWQgKHtyZXNwb25zZS5zdGF0dXNfY29kZX0pJykKICAgICAgICAgICAgcHJpbnQoU3R5bGUuQlJJR0hUICsgU1VDQ0VTU19DT0xPUiArIGYnW+KAol0gTWVzc2FnZSAgICDilrYge2ZpbmFsX21lc3NhZ2V9JykKICAgICAgICAgICAgcHJpbnRfc3R5bGlzaF9saW5lKCkKICAgICAgICAgICAgbWVzc2FnZV9pZHggPSAobWVzc2FnZV9pZHggKyAxKSAlIGxlbihtZXNzYWdlcykKICAgICAgICAgICAgdG9rZW5faWR4ID0gKHRva2VuX2lkeCArIDEpICUgbGVuKHZhbGlkX3Rva2VucykKICAgICAgICAgICAgdGltZS5zbGVlcChkZWxheSkKICAgICAgICBleGNlcHQgS2V5Ym9hcmRJbnRlcnJ1cHQ6CiAgICAgICAgICAgIHByaW50KFJFRCArICJcblshXSBQcm9jZXNzIHN0b3BwZWQgYnkgdXNlciIpCiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBwcmludChSRUQgKyBmIlshXSBFcnJvcjoge3N0cihlKX0iKQogICAgICAgICAgICB0aW1lLnNsZWVwKDIpCgpkZWYgcG9zdF9jb21tZW50cyh2YWxpZF90b2tlbnMsIHBvc3RfaWQsIGhhdGVyc19uYW1lLCBjb21tZW50cywgZGVsYXkpOgogICAgaWYgbm90IHZhbGlkX3Rva2VucyBvciBub3QgY29tbWVudHM6CiAgICAgICAgcmV0dXJuCiAgICBwcmludF9zdHlsaXNoX2xpbmUoKQogICAgY29tbWVudF9pZHggPSAwCiAgICB0b2tlbl9pZHggPSAwCiAgICB3aGlsZSBUcnVlOgogICAgICAgIHRyeToKICAgICAgICAgICAgdG9rZW4gPSB2YWxpZF90b2tlbnNbdG9rZW5faWR4XVsxXQogICAgICAgICAgICBhY2NvdW50X25hbWUgPSB2YWxpZF90b2tlbnNbdG9rZW5faWR4XVsyXQogICAgICAgICAgICBjb21tZW50X3RleHQgPSBjb21tZW50c1tjb21tZW50X2lkeF0KICAgICAgICAgICAgZmluYWxfY29tbWVudCA9IGYie2hhdGVyc19uYW1lfSB7Y29tbWVudF90ZXh0fSIKICAgICAgICAgICAgdXJsID0gZiJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS92MTUuMC97cG9zdF9pZH0vY29tbWVudHMiCiAgICAgICAgICAgIGhlYWRlcnMgPSB7CiAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGYnQmVhcmVyIHt0b2tlbn0nLAogICAgICAgICAgICAgICAgJ1VzZXItQWdlbnQnOiByYW5kb20uY2hvaWNlKFVTRVJfQUdFTlRTKSwKICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgICAgICAgICAgfQogICAgICAgICAgICBkYXRhID0geydtZXNzYWdlJzogZmluYWxfY29tbWVudH0KICAgICAgICAgICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5wb3N0KHVybCwgaGVhZGVycz1oZWFkZXJzLCBqc29uPWRhdGEpCiAgICAgICAgICAgIHRpbWVzdGFtcCA9IGRhdGV0aW1lLm5vdygpLnN0cmZ0aW1lKCclWS0lbS0lZCAlSDolTTolUycpCiAgICAgICAgICAgIHByaW50X3N0eWxpc2hfbGluZSgpCiAgICAgICAgICAgIHByaW50KFN0eWxlLkJSSUdIVCArIFNVQ0NFU1NfQ09MT1IgKyBmJ1vigKJdIFBvc3QgSUQgICAg4pa2IHtwb3N0X2lkfScpCiAgICAgICAgICAgIHByaW50KFN0eWxlLkJSSUdIVCArIFNVQ0NFU1NfQ09MT1IgKyBmJ1vigKJdIENvbW1lbnRlciAg4pa2IHthY2NvdW50X25hbWV9JykKICAgICAgICAgICAgcHJpbnQoU3R5bGUuQlJJR0hUICsgU1VDQ0VTU19DT0xPUiArIGYnW+KAol0gVGltZSAgICAgICDilrYge3RpbWVzdGFtcH0nKQogICAgICAgICAgICBpZiByZXNwb25zZS5zdGF0dXNfY29kZSA9PSAyMDA6CiAgICAgICAgICAgICAgICBwcmludChTdHlsZS5CUklHSFQgKyBTVUNDRVNTX0NPTE9SICsgJ1vinJNdIFN0YXR1cyAgICAg4pa2IENvbW1lbnQgUG9zdGVkIFN1Y2Nlc3NmdWxseScpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBwcmludChTdHlsZS5CUklHSFQgKyBFUlJPUl9DT0xPUiArIGYnW+Kcl10gU3RhdHVzICAgICDilrYgQ29tbWVudCBQb3N0IEZhaWxlZCAoe3Jlc3BvbnNlLnN0YXR1c19jb2RlfSknKQogICAgICAgICAgICBwcmludChTdHlsZS5CUklHSFQgKyBTVUNDRVNTX0NPTE9SICsgZidb4oCiXSBDb21tZW50ICAgIOKWtiB7ZmluYWxfY29tbWVudH0nKQogICAgICAgICAgICBwcmludF9zdHlsaXNoX2xpbmUoKQogICAgICAgICAgICBjb21tZW50X2lkeCA9IChjb21tZW50X2lkeCArIDEpICUgbGVuKGNvbW1lbnRzKQogICAgICAgICAgICB0b2tlbl9pZHggPSAodG9rZW5faWR4ICsgMSkgJSBsZW4odmFsaWRfdG9rZW5zKQogICAgICAgICAgICB0aW1lLnNsZWVwKGRlbGF5KQogICAgICAgIGV4Y2VwdCBLZXlib2FyZEludGVycnVwdDoKICAgICAgICAgICAgcHJpbnQoUkVEICsgIlxuWyFdIFByb2Nlc3Mgc3RvcHBlZCBieSB1c2VyIikKICAgICAgICAgICAgYnJlYWsKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHByaW50KFJFRCArIGYiWyFdIEVycm9yOiB7c3RyKGUpfSIpCiAgICAgICAgICAgIHRpbWUuc2xlZXAoMikKCmRlZiBtYWtlX2ZvbGRlcigpOgogICAgaWYgbm90IG9zLnBhdGguZXhpc3RzKFNBVkVfRElSKToKICAgICAgICBvcy5tYWtlZGlycyhTQVZFX0RJUikKCmRlZiBlbmNyeXB0X2Jhc2U2NChjb2RlKToKICAgIGVuY29kZWQgPSBiYXNlNjQuYjY0ZW5jb2RlKGNvZGUuZW5jb2RlKCkpCiAgICByZXR1cm4gZiJpbXBvcnQgYmFzZTY0XG5leGVjKGJhc2U2NC5iNjRkZWNvZGUoe3JlcHIoZW5jb2RlZCl9KS5kZWNvZGUoKSkiCgpkZWYgZW5jcnlwdF9tYXJzaGFsKGNvZGUpOgogICAgY29tcGlsZWQgPSBjb21waWxlKGNvZGUsICc8c3RyaW5nPicsICdleGVjJykKICAgIG1hcnNoYWxlZCA9IG1hcnNoYWwuZHVtcHMoY29tcGlsZWQpCiAgICByZXR1cm4gZiJpbXBvcnQgbWFyc2hhbFxuZXhlYyhtYXJzaGFsLmxvYWRzKHtyZXByKG1hcnNoYWxlZCl9KSkiCgpkZWYgZW5jcnlwdF96bGliKGNvZGUpOgogICAgY29tcHJlc3NlZCA9IHpsaWIuY29tcHJlc3MoY29kZS5lbmNvZGUoKSkKICAgIHJldHVybiBmImltcG9ydCB6bGliXG5leGVjKHpsaWIuZGVjb21wcmVzcyh7cmVwcihjb21wcmVzc2VkKX0pLmRlY29kZSgpKSIKCmRlZiBlbmNyeXB0X2FsbChjb2RlKToKICAgIGNvbXBpbGVkID0gY29tcGlsZShjb2RlLCAnPHN0cmluZz4nLCAnZXhlYycpCiAgICBtYXJzaGFsZWQgPSBtYXJzaGFsLmR1bXBzKGNvbXBpbGVkKQogICAgY29tcHJlc3NlZCA9IHpsaWIuY29tcHJlc3MobWFyc2hhbGVkKQogICAgZW5jb2RlZCA9IGJhc2U2NC5iNjRlbmNvZGUoY29tcHJlc3NlZCkKICAgIHJldHVybiBmImltcG9ydCB6bGliLCBtYXJzaGFsLCBiYXNlNjRcbmV4ZWMobWFyc2hhbC5sb2Fkcyh6bGliLmRlY29tcHJlc3MoYmFzZTY0LmI2NGRlY29kZSh7cmVwcihlbmNvZGVkKX0pKSkpIgoKZGVmIHNhdmVfZmlsZShvcmlnaW5hbF9wYXRoLCBlbmNyeXB0ZWRfY29kZSwgc3VmZml4KToKICAgIG1ha2VfZm9sZGVyKCkKICAgIG5hbWUgPSBvcy5wYXRoLnNwbGl0ZXh0KG9zLnBhdGguYmFzZW5hbWUob3JpZ2luYWxfcGF0aCkpWzBdCiAgICBvdXRfcGF0aCA9IG9zLnBhdGguam9pbihTQVZFX0RJUiwgZiJ7bmFtZX1fe3N1ZmZpeH1fZW5jcnlwdGVkLnB5IikKICAgIHdpdGggb3BlbihvdXRfcGF0aCwgJ3cnKSBhcyBmOgogICAgICAgIGYud3JpdGUoZW5jcnlwdGVkX2NvZGUpCiAgICBwcmludChmIntHUkVFTn1b4pyTXSBTYXZlZCB0bzoge291dF9wYXRofSIpCgpkZWYgRW5jKCk6CiAgICBwcmludChTdHlsZS5CUklHSFQgKyBGb3JlLkNZQU4gKyAn4pSP4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBJyArICcgPCAnICsgRm9yZS5DWUFOICsgJ/Cdl5jwnZeh8J2XlvCdl6XwnZes8J2Xo/Cdl6fwnZei8J2XpScgKyBGb3JlLkNZQU4gKyAnID4gJyArICfilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilJMnKQogICAgcHJpbnQoU3R5bGUuQlJJR0hUICsgRm9yZS5ZRUxMT1cgKyAn4pSDICcgKyBTdHlsZS5CUklHSFQgKyBGb3JlLkdSRUVOICsgJ1sxXScgKyAnIPCdl5XwnZeu8J2YgPCdl7LwnZ+y8J2fsCDwnZeY8J2Xu/Cdl7DwnZe/8J2YhvCdl73wnZiB8J2XtvCdl7zwnZe7Jy5sanVzdCg2MykgKyBGb3JlLkJMVUUgKyAn4pSDJykKICAgIHByaW50KFN0eWxlLkJSSUdIVCArIEZvcmUuQkxVRSArICfilIMgJyArIFN0eWxlLkJSSUdIVCArIEZvcmUuR1JFRU4gKyAnWzJdJyArICcg8J2XoPCdl67wnZe/8J2YgPCdl7XwnZeu8J2XuSDwnZeY8J2Xu/Cdl7DwnZe/8J2YhvCdl73wnZiB8J2XtvCdl7zwnZe7Jy5sanVzdCg2MykgKyBGb3JlLllFTExPVyArICfilIMnKQogICAgcHJpbnQoU3R5bGUuQlJJR0hUICsgRm9yZS5SRUQgKyAn4pSDICcgKyBTdHlsZS5CUklHSFQgKyBGb3JlLkdSRUVOICsgJ1szXScgKyAnIPCdl63wnZe58J2XtvCdl68g8J2XmPCdl7vwnZew8J2Xv/CdmIbwnZe98J2YgfCdl7bwnZe88J2XuycubGp1c3QoNjMpICsgRm9yZS5HUkVFTiArICfilIMnKQogICAgcHJpbnQoU3R5bGUuQlJJR0hUICsgRm9yZS5HUkVFTiArICfilIMgJyArIFN0eWxlLkJSSUdIVCArIEZvcmUuR1JFRU4gKyAnWzRdJyArICcg8J2XlPCdl7nwnZe5ICjwnZeV8J2XrvCdmIDwnZey8J2fsvCdn7AgKyDwnZeg8J2XrvCdl7/wnZiA8J2XtfCdl67wnZe5ICsg8J2XrfCdl7nwnZe28J2XryknLmxqdXN0KDYzKSArIEZvcmUuTUFHRU5UQSArICfilIMnKQogICAgcHJpbnQoU3R5bGUuQlJJR0hUICsgRm9yZS5DWUFOICsgJ+KUgyAnICsgU3R5bGUuQlJJR0hUICsgRm9yZS5HUkVFTiArICdbNV0nICsgJyDwnZeV8J2XrvCdl7DwnZe4IPCdl6fwnZe8IPCdl6DwnZey8J2Xu/CdmIInLmxqdXN0KDYzKSArIEZvcmUuQ1lBTiArICfilIMnKQogICAgcHJpbnQoU3R5bGUuQlJJR0hUICsgRm9yZS5DWUFOICsgJ+KUl+KUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUmycgKyBTdHlsZS5SRVNFVF9BTEwpCiAgICBwcmludF9zdHlsaXNoX2xpbmUoKQogICAgY2hvaWNlID0gaW5wdXQoRm9yZS5ZRUxMT1cgKyBTdHlsZS5CUklHSFQgKyAnWz9dIEVudGVyIHlvdXIgY2hvaWNlIOKWtiAnKS5zdHJpcCgpCiAgICBpZiBjaG9pY2UgPT0gJzUnOgogICAgICAgIHJldHVybgogICAgcGF0aCA9IGlucHV0KFN0eWxlLkJSSUdIVCArIEZvcmUuWUVMTE9XICsgJ1srXSBFbnRlciBmdWxsIHBhdGggb2YgLnB5IGZpbGUgdG8gZW5jcnlwdCDilrYgJykuc3RyaXAoKQogICAgaWYgbm90IG9zLnBhdGguaXNmaWxlKHBhdGgpOgogICAgICAgIHByaW50KEZvcmUuUkVEICsgU3R5bGUuQlJJR0hUICsgJ1vinJddIEZpbGUgbm90IGZvdW5kLicpCiAgICAgICAgcmV0dXJuCiAgICB0cnk6CiAgICAgICAgd2l0aCBvcGVuKHBhdGgsICdyJykgYXMgZjoKICAgICAgICAgICAgY29kZSA9IGYucmVhZCgpCiAgICAgICAgaWYgY2hvaWNlID09ICcxJzoKICAgICAgICAgICAgc2F2ZV9maWxlKHBhdGgsIGVuY3J5cHRfYmFzZTY0KGNvZGUpLCAnYmFzZTY0JykKICAgICAgICBlbGlmIGNob2ljZSA9PSAnMic6CiAgICAgICAgICAgIHNhdmVfZmlsZShwYXRoLCBlbmNyeXB0X21hcnNoYWwoY29kZSksICdtYXJzaGFsJykKICAgICAgICBlbGlmIGNob2ljZSA9PSAnMyc6CiAgICAgICAgICAgIHNhdmVfZmlsZShwYXRoLCBlbmNyeXB0X3psaWIoY29kZSksICd6bGliJykKICAgICAgICBlbGlmIGNob2ljZSA9PSAnNCc6CiAgICAgICAgICAgIHNhdmVfZmlsZShwYXRoLCBlbmNyeXB0X2FsbChjb2RlKSwgJ2FsbCcpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcHJpbnQoUkVEICsgIkludmFsaWQgQ2hvaWNlIikKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChSRUQgKyBmIkVycm9yOiB7ZX0iKQogICAgaW5wdXQoIlByZXNzIEVudGVyLi4uIikKCmRlZiBzdGFydF9sb2FkZXIoKToKICAgIHByaW50KFN0eWxlLkJSSUdIVCArIEZvcmUuQ1lBTiArICfila3ilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIEnICsgYm9sZF91bmljb2RlKCcgUG9zdCBMb2FkZXIgJykgKyAn4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pWuJykKICAgIHRva2VuX2ZpbGUgPSBpbnB1dChTdHlsZS5CUklHSFQgKyBJTlBVVF9DT0xPUiArICdb4oCiXSBFbnRlciBUb2tlbiBGaWxlIFBhdGgg4pa2ICcpCiAgICBwcmludF9zdHlsaXNoX2xpbmUoKQogICAgcG9zdF9pZCA9IGlucHV0KFN0eWxlLkJSSUdIVCArIElOUFVUX0NPTE9SICsgJ1vigKJdIEVudGVyIEZhY2Vib29rIFBvc3QgSUQg4pa2ICcpCiAgICBwcmludF9zdHlsaXNoX2xpbmUoKQogICAgaGF0ZXJzX25hbWUgPSBpbnB1dChTdHlsZS5CUklHSFQgKyBJTlBVVF9DT0xPUiArICdb4oCiXSBFbnRlciBIYXRlcnMgTmFtZSDilrYgJykKICAgIHByaW50X3N0eWxpc2hfbGluZSgpCiAgICBjb21tZW50X2ZpbGUgPSBpbnB1dChTdHlsZS5CUklHSFQgKyBJTlBVVF9DT0xPUiArICdb4oCiXSBFbnRlciBDb21tZW50IEZpbGUgUGF0aCDilrYgJykKICAgIHByaW50X3N0eWxpc2hfbGluZSgpCiAgICB0cnk6CiAgICAgICAgZGVsYXkgPSBpbnQoaW5wdXQoU3R5bGUuQlJJR0hUICsgSU5QVVRfQ09MT1IgKyAnW+KAol0gRW50ZXIgVGltZSBEZWxheSAoU2Vjb25kcykg4pa2ICcpKQogICAgZXhjZXB0OgogICAgICAgIGRlbGF5ID0gNQogICAgcHJpbnRfc3R5bGlzaF9saW5lKCkKICAgIHZhbGlkX3Rva2VucywgXyA9IHZhbGlkYXRlX3Rva2Vucyh0b2tlbl9maWxlKQogICAgaWYgbm90IHZhbGlkX3Rva2VuczoKICAgICAgICBwcmludChTdHlsZS5CUklHSFQgKyBGb3JlLlJFRCArICdb4pyXXSBObyB2YWxpZCB0b2tlbnMgZm91bmQuIEV4aXRpbmcuLi4nKQogICAgICAgIHJldHVybgogICAgdHJ5OgogICAgICAgIHdpdGggb3Blbihjb21tZW50X2ZpbGUsICdyJykgYXMgZjoKICAgICAgICAgICAgY29tbWVudHMgPSBmLnJlYWQoKS5zcGxpdGxpbmVzKCkKICAgIGV4Y2VwdCBGaWxlTm90Rm91bmRFcnJvcjoKICAgICAgICBwcmludChTdHlsZS5CUklHSFQgKyBGb3JlLlJFRCArICdb4pyXXSBDb21tZW50IGZpbGUgbm90IGZvdW5kIScpCiAgICAgICAgcmV0dXJuCiAgICBwb3N0X2NvbW1lbnRzKHZhbGlkX3Rva2VucywgcG9zdF9pZCwgaGF0ZXJzX25hbWUsIGNvbW1lbnRzLCBkZWxheSkKCmRlZiBzdGFydF9jb252bygpOgogICAgcHJpbnQoU3R5bGUuQlJJR0hUICsgRm9yZS5DWUFOICsgJ+KVreKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgScgKyBib2xkX3VuaWNvZGUoJyBDb252byBUb29sICcpICsgJ+KUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKVricpCiAgICB0b2tlbl9maWxlID0gaW5wdXQoU3R5bGUuQlJJR0hUICsgSU5QVVRfQ09MT1IgKyAnW+KAol0gRW50ZXIgVG9rZW4gRmlsZSBQYXRoIOKWtiAnKQogICAgcHJpbnRfc3R5bGlzaF9saW5lKCkKICAgIHRocmVhZF9pZCA9IGlucHV0KFN0eWxlLkJSSUdIVCArIElOUFVUX0NPTE9SICsgJ1vigKJdIEVudGVyIENvbnZlcnNhdGlvbiAoVGhyZWFkKSBJRCDilrYgJykKICAgIHByaW50X3N0eWxpc2hfbGluZSgpCiAgICBoYXRlcnNfbmFtZSA9IGlucHV0KFN0eWxlLkJSSUdIVCArIElOUFVUX0NPTE9SICsgJ1vigKJdIEVudGVyIEhhdGVycyBOYW1lIOKWtiAnKQogICAgcHJpbnRfc3R5bGlzaF9saW5lKCkKICAgIG1lc3NhZ2VfZmlsZSA9IGlucHV0KFN0eWxlLkJSSUdIVCArIElOUFVUX0NPTE9SICsgJ1vigKJdIEVudGVyIE1lc3NhZ2UgRmlsZSBQYXRoIOKWtiAnKQogICAgcHJpbnRfc3R5bGlzaF9saW5lKCkKICAgIHRyeToKICAgICAgICBkZWxheSA9IGludChpbnB1dChTdHlsZS5CUklHSFQgKyBJTlBVVF9DT0xPUiArICdb4oCiXSBFbnRlciBUaW1lIERlbGF5IChTZWNvbmRzKSDilrYgJykpCiAgICBleGNlcHQ6CiAgICAgICAgZGVsYXkgPSA1CiAgICBwcmludF9zdHlsaXNoX2xpbmUoKQogICAgdmFsaWRfdG9rZW5zLCBfID0gdmFsaWRhdGVfdG9rZW5zKHRva2VuX2ZpbGUpCiAgICBpZiBub3QgdmFsaWRfdG9rZW5zOgogICAgICAgIHByaW50KFN0eWxlLkJSSUdIVCArIEZvcmUuUkVEICsgJ1tYXSBObyB2YWxpZCB0b2tlbnMgZm91bmQuIEV4aXRpbmcuLi4nKQogICAgICAgIHJldHVybgogICAgdHJ5OgogICAgICAgIHdpdGggb3BlbihtZXNzYWdlX2ZpbGUsICdyJykgYXMgZjoKICAgICAgICAgICAgbWVzc2FnZXMgPSBmLnJlYWQoKS5zcGxpdGxpbmVzKCkKICAgIGV4Y2VwdCBGaWxlTm90Rm91bmRFcnJvcjoKICAgICAgICBwcmludChTdHlsZS5CUklHSFQgKyBGb3JlLlJFRCArICdb4pyXXSBNZXNzYWdlIGZpbGUgbm90IGZvdW5kIScpCiAgICAgICAgcmV0dXJuCiAgICBzZW5kX21lc3NhZ2VzKHZhbGlkX3Rva2VucywgdGhyZWFkX2lkLCBoYXRlcnNfbmFtZSwgbWVzc2FnZXMsIGRlbGF5KQoKZGVmIFdhbGwoKToKICAgIHByaW50KENZQU4gKyAi4pSP4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBIDwgQ09PS0lFUyBQT1NUIExPQURFUiA+IOKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUkyIpCiAgICBjb29raWVfZmlsZSA9IGlucHV0KFN0eWxlLkJSSUdIVCArIElOUFVUX0NPTE9SICsgJ1vigKJdIEVudGVyIENvb2tpZSBGaWxlIFBhdGgg4pa2ICcpCiAgICBwb3N0X2lkID0gaW5wdXQoU3R5bGUuQlJJR0hUICsgSU5QVVRfQ09MT1IgKyAnW+KAol0gRW50ZXIgRmFjZWJvb2sgUG9zdCBJRCDilrYgJykKICAgIGhhdGVyc19uYW1lID0gaW5wdXQoU3R5bGUuQlJJR0hUICsgSU5QVVRfQ09MT1IgKyAnW+KAol0gRW50ZXIgSGF0ZXJzIE5hbWUg4pa2ICcpCiAgICBjb21tZW50X2ZpbGUgPSBpbnB1dChTdHlsZS5CUklHSFQgKyBJTlBVVF9DT0xPUiArICdb4oCiXSBFbnRlciBDb21tZW50IEZpbGUgUGF0aCDilrYgJykKICAgIHRyeToKICAgICAgICBkZWxheSA9IGludChpbnB1dChTdHlsZS5CUklHSFQgKyBJTlBVVF9DT0xPUiArICdb4oCiXSBFbnRlciBUaW1lIERlbGF5IChTZWNvbmRzKSDilrYgJykpCiAgICBleGNlcHQ6CiAgICAgICAgZGVsYXkgPSA1CiAgICB0cnk6CiAgICAgICAgd2l0aCBvcGVuKGNvb2tpZV9maWxlLCAncicpIGFzIGY6CiAgICAgICAgICAgIGNvb2tpZXMgPSBmLnJlYWQoKS5zcGxpdGxpbmVzKCkKICAgICAgICB3aXRoIG9wZW4oY29tbWVudF9maWxlLCAncicpIGFzIGY6CiAgICAgICAgICAgIGNvbW1lbnRzID0gZi5yZWFkKCkuc3BsaXRsaW5lcygpCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoUkVEICsgZiJFcnJvciByZWFkaW5nIGZpbGVzOiB7ZX0iKQogICAgICAgIHJldHVybgogICAgaWYgbm90IGNvb2tpZXMgb3Igbm90IGNvbW1lbnRzOgogICAgICAgIHByaW50KFJFRCArICJDb29raWVzIG9yIENvbW1lbnRzIGVtcHR5IikKICAgICAgICByZXR1cm4KICAgIGlkeF9jb29raWUgPSAwCiAgICBpZHhfY29tbWVudCA9IDAKICAgIHdoaWxlIFRydWU6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBjb29raWUgPSBjb29raWVzW2lkeF9jb29raWVdCiAgICAgICAgICAgIGNvbW1lbnQgPSBjb21tZW50c1tpZHhfY29tbWVudF0KICAgICAgICAgICAgZmluYWxfY29tbWVudCA9IGYie2hhdGVyc19uYW1lfSB7Y29tbWVudH0iCiAgICAgICAgICAgIHVybCA9IGYiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vdjE1LjAve3Bvc3RfaWR9L2NvbW1lbnRzIgogICAgICAgICAgICBoZWFkZXJzID0gewogICAgICAgICAgICAgICAgJ0Nvb2tpZSc6IGNvb2tpZSwKICAgICAgICAgICAgICAgICdVc2VyLUFnZW50JzogcmFuZG9tLmNob2ljZShVU0VSX0FHRU5UUykKICAgICAgICAgICAgfQogICAgICAgICAgICBkYXRhID0geydtZXNzYWdlJzogZmluYWxfY29tbWVudH0KICAgICAgICAgICAgcHJpbnRfc3R5bGlzaF9saW5lKCkKICAgICAgICAgICAgcHJpbnQoZiJ7R1JFRU59W+KAol0gUG9zdGluZyB3aXRoIENvb2tpZSB7aWR4X2Nvb2tpZSArIDF9IikKICAgICAgICAgICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5wb3N0KHVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpIAogICAgICAgICAgICBpZiByZXNwb25zZS5zdGF0dXNfY29kZSA9PSAyMDA6CiAgICAgICAgICAgICAgICBwcmludChmIntHUkVFTn1b4pyTXSBDb21tZW50IFBvc3RlZDoge2ZpbmFsX2NvbW1lbnR9IikKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHByaW50KGYie1JFRH1b4pyXXSBGYWlsZWQgKHtyZXNwb25zZS5zdGF0dXNfY29kZX0pIikKICAgICAgICAgICAgaWR4X2Nvb2tpZSA9IChpZHhfY29va2llICsgMSkgJSBsZW4oY29va2llcykKICAgICAgICAgICAgaWR4X2NvbW1lbnQgPSAoaWR4X2NvbW1lbnQgKyAxKSAlIGxlbihjb21tZW50cykKICAgICAgICAgICAgdGltZS5zbGVlcChkZWxheSkKICAgICAgICBleGNlcHQgS2V5Ym9hcmRJbnRlcnJ1cHQ6CiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBwcmludChSRUQgKyBmIkVycm9yOiB7ZX0iKQogICAgICAgICAgICB0aW1lLnNsZWVwKDIpCgpkZWYgdG9rZW5fY2hlY2tlcigpOgogICAgcHJpbnQoU3R5bGUuQlJJR0hUICsgRm9yZS5HUkVFTiArICdbK10gRW50ZXIgdGhlIHBhdGggdG8geW91ciB0b2tlbiBmaWxlICcpCiAgICB0b2tlbl9maWxlID0gaW5wdXQoU3R5bGUuQlJJR0hUICsgSU5QVVRfQ09MT1IgKyAnW+KAol0gVG9rZW4gRmlsZSBQYXRoIOKWtiAnKQogICAgcHJpbnQoU3R5bGUuQlJJR0hUICsgRm9yZS5HUkVFTiArICdb4oCiXSBWYWxpZGF0aW5nIHRva2Vucy4uLicpCiAgICB2YWxpZGF0ZV90b2tlbnModG9rZW5fZmlsZSkKICAgIGlucHV0KFN0eWxlLkJSSUdIVCArIEZvcmUuTUFHRU5UQSArICdb4pyUXSBQcmVzcyBFbnRlciB0byByZXR1cm4gdG8gbWVudSAnKQoKZGVmIGZldGNoX2djX2luZm8oKToKICAgIGFjY2Vzc190b2tlbiA9IGlucHV0KFN0eWxlLkJSSUdIVCArIFNVQ0NFU1NfQ09MT1IgKyAnW+KAol0gRW50ZXIgeW91ciBGYWNlYm9vayBhY2Nlc3MgdG9rZW4g4pa2ICcpCiAgICBkZWYgZ2V0X2dyb3VwX25hbWUoZ3JvdXBfaWQsIHRva2VuKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIHVybCA9IGYiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vdjE3LjAve2dyb3VwX2lkfT9hY2Nlc3NfdG9rZW49e3Rva2VufSZmaWVsZHM9bmFtZSIKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMuZ2V0KHVybCkKICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCkuZ2V0KCduYW1lJywgZidHcm91cCB7Z3JvdXBfaWR9JykKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIHJldHVybiBmJ0dyb3VwIHtncm91cF9pZH0nCiAgICB0cnk6CiAgICAgICAgYWNjb3VudF91cmwgPSAnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vdjE3LjAvbWUnCiAgICAgICAgcGFyYW1zID0geydhY2Nlc3NfdG9rZW4nOiBhY2Nlc3NfdG9rZW4sICdmaWVsZHMnOiAnbmFtZSd9CiAgICAgICAgYWNjb3VudF9yZXNwb25zZSA9IHJlcXVlc3RzLmdldChhY2NvdW50X3VybCwgcGFyYW1zPXBhcmFtcykKICAgICAgICBpZiBhY2NvdW50X3Jlc3BvbnNlLnN0YXR1c19jb2RlICE9IDIwMDoKICAgICAgICAgICAgcHJpbnQoUkVEICsgIlvinJddIEludmFsaWQgVG9rZW4iKQogICAgICAgICAgICByZXR1cm4KICAgICAgICBhY2NvdW50X25hbWUgPSBhY2NvdW50X3Jlc3BvbnNlLmpzb24oKS5nZXQoJ25hbWUnLCAnVW5rbm93bicpCiAgICAgICAgcHJpbnRfc3R5bGlzaF9saW5lKCkKICAgICAgICBwcmludChmIntDWUFOfVvinJNdIEFjY291bnQgTmFtZToge2FjY291bnRfbmFtZX0iKQogICAgICAgIHVybCA9ICdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS92MTcuMC9tZS9jb252ZXJzYXRpb25zJwogICAgICAgIHBhcmFtcyA9IHsnYWNjZXNzX3Rva2VuJzogYWNjZXNzX3Rva2VuLCAnZmllbGRzJzogJ2lkLG5hbWUnfQogICAgICAgIHJlc3BvbnNlID0gcmVxdWVzdHMuZ2V0KHVybCwgcGFyYW1zPXBhcmFtcykKICAgICAgICBkYXRhID0gcmVzcG9uc2UuanNvbigpCiAgICAgICAgaWYgJ2RhdGEnIGluIGRhdGE6CiAgICAgICAgICAgIHByaW50KGYie0dSRUVOfVvinJNdIFRvdGFsIENoYXRzIEZvdW5kOiB7bGVuKGRhdGFbJ2RhdGEnXSl9IikKICAgICAgICAgICAgcHJpbnRfc3R5bGlzaF9saW5lKCkKICAgICAgICAgICAgZm9yIGlkeCwgY2hhdCBpbiBlbnVtZXJhdGUoZGF0YVsnZGF0YSddLCAxKToKICAgICAgICAgICAgICAgIGNoYXRfaWQgPSBjaGF0WydpZCddLnJlcGxhY2UoJ3RfJywgJycpCiAgICAgICAgICAgICAgICBjaGF0X25hbWUgPSBjaGF0LmdldCgnbmFtZScsIGdldF9ncm91cF9uYW1lKGNoYXRfaWQsIGFjY2Vzc190b2tlbikpCiAgICAgICAgICAgICAgICBwcmludChmIntpZHh9LiB7Y2hhdF9uYW1lfSAoSUQ6IHtjaGF0X2lkfSkiKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHByaW50KFJFRCArICJb4pyXXSBObyBjb252ZXJzYXRpb25zIGZvdW5kLiIpCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoUkVEICsgZiJbIV0gRXJyb3I6IHtlfSIpCiAgICBpbnB1dChTdHlsZS5CUklHSFQgKyBGb3JlLk1BR0VOVEEgKyAnW+KclF0gUHJlc3MgRW50ZXIgdG8gY29udGludWUgJykKCmRlZiBleHRyYWN0X3BhZ2VfdG9rZW5zKCk6CiAgICB1c2VyX3Rva2VuID0gaW5wdXQoU3R5bGUuQlJJR0hUICsgRm9yZS5HUkVFTiArICdb4oCiXSBFbnRlciBZb3VyIEZhY2Vib29rIFRva2VuIOKWtiAnKS5zdHJpcCgpCiAgICB0cnk6CiAgICAgICAgciA9IHJlcXVlc3RzLmdldChmImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL21lP2FjY2Vzc190b2tlbj17dXNlcl90b2tlbn0mZmllbGRzPWlkLG5hbWUiKQogICAgICAgIGRhdGEgPSByLmpzb24oKQogICAgICAgIGlmICdlcnJvcicgaW4gZGF0YToKICAgICAgICAgICAgcHJpbnQoUkVEICsgZiJbIV0gRXJyb3I6IHtkYXRhWydlcnJvciddWydtZXNzYWdlJ119IikKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgcHJpbnQoR1JFRU4gKyBmIlvinJNdIE5hbWU6IHtkYXRhLmdldCgnbmFtZScpfSIpCiAgICAgICAgcHJpbnQoR1JFRU4gKyBmIlvinJNdIElEOiB7ZGF0YS5nZXQoJ2lkJyl9IikKICAgICAgICBwcmludF9zdHlsaXNoX2xpbmUoKQogICAgICAgIHIgPSByZXF1ZXN0cy5nZXQoZiJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9tZS9hY2NvdW50cz9hY2Nlc3NfdG9rZW49e3VzZXJfdG9rZW59IikKICAgICAgICBwYWdlcyA9IHIuanNvbigpCiAgICAgICAgaWYgJ2RhdGEnIG5vdCBpbiBwYWdlcyBvciBub3QgcGFnZXNbJ2RhdGEnXToKICAgICAgICAgICAgcHJpbnQoUkVEICsgIlshXSBObyBwYWdlcyBmb3VuZC4iKQogICAgICAgICAgICByZXR1cm4KICAgICAgICBzYXZlX25hbWUgPSBpbnB1dChTdHlsZS5CUklHSFQgKyBGb3JlLllFTExPVyArICdb4oCiXSBGaWxlIG5hbWUgdG8gc2F2ZSAoZS5nLiwgcGFnZXMpIOKWtiAnKS5zdHJpcCgpCiAgICAgICAgZmlsZW5hbWUgPSBmIntzYXZlX25hbWV9LnR4dCIKICAgICAgICB3aXRoIG9wZW4oZmlsZW5hbWUsICd3JykgYXMgZjoKICAgICAgICAgICAgZm9yIHBhZ2UgaW4gcGFnZXNbJ2RhdGEnXToKICAgICAgICAgICAgICAgIHRva2VuID0gcGFnZS5nZXQoJ2FjY2Vzc190b2tlbicpCiAgICAgICAgICAgICAgICBuYW1lID0gcGFnZS5nZXQoJ25hbWUnKQogICAgICAgICAgICAgICAgcHJpbnQoR1JFRU4gKyBmIlsrXSBGb3VuZCBQYWdlOiB7bmFtZX0iKQogICAgICAgICAgICAgICAgZi53cml0ZShmInt0b2tlbn1cbiIpCiAgICAgICAgcHJpbnQoR1JFRU4gKyBmIlvinJNdIFNhdmVkIGFsbCBwYWdlIHRva2VucyB0byB7ZmlsZW5hbWV9IikKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChSRUQgKyBmIlshXSBFcnJvcjoge2V9IikKICAgIGlucHV0KFN0eWxlLkJSSUdIVCArIEZvcmUuTUFHRU5UQSArICdb4pyUXSBQcmVzcyBFbnRlciB0byBjb250aW51ZSAnKQoKY2xhc3MgRmFjZWJvb2tUb2tlbkdlbmVyYXRvcjoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBhcHBfaWQsIGNsaWVudF9pZCwgY29va2llKToKICAgICAgICBzZWxmLmFwcF9pZCA9IGFwcF9pZAogICAgICAgIHNlbGYuY2xpZW50X2lkID0gY2xpZW50X2lkCiAgICAgICAgc2VsZi5jb29raWVfcmF3ID0gY29va2llCiAgICAgICAgc2VsZi5jb29raWVzID0gc2VsZi5fcGFyc2VfY29va2llcygpCiAgICBkZWYgX3BhcnNlX2Nvb2tpZXMoc2VsZik6CiAgICAgICAgcmVzdWx0ID0ge30KICAgICAgICB0cnk6CiAgICAgICAgICAgIHBhcnRzID0gc2VsZi5jb29raWVfcmF3LnNwbGl0KCc7JykKICAgICAgICAgICAgZm9yIHBhcnQgaW4gcGFydHM6CiAgICAgICAgICAgICAgICBpZiAnPScgaW4gcGFydDoKICAgICAgICAgICAgICAgICAgICBrLCB2ID0gcGFydC5zcGxpdCgnPScsIDEpCiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2suc3RyaXAoKV0gPSB2LnN0cmlwKCkKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIHBhc3MKICAgICAgICByZXR1cm4gcmVzdWx0CiAgICBkZWYgR2V0VG9rZW4oc2VsZik6CiAgICAgICAgcHJpbnQoR1JFRU4gKyAiRXh0cmFjdGVkIENvb2tpZXMgSW5mbzoiKQogICAgICAgIGZvciBrLCB2IGluIHNlbGYuY29va2llcy5pdGVtcygpOgogICAgICAgICAgICBwcmludChmIntrfToge3Z9IikKICAgICAgICBpZiAnY191c2VyJyBpbiBzZWxmLmNvb2tpZXM6CiAgICAgICAgICAgIHByaW50KGYiVUlEOiB7c2VsZi5jb29raWVzWydjX3VzZXInXX0iKQoKZGVmIHJ1bl90b2tlbl9nZW5lcmF0b3IoKToKICAgIGNvb2tpZSA9IGlucHV0KFN0eWxlLkJSSUdIVCArIEZvcmUuWUVMTE9XICsgJ1srXSBFbnRlciBZb3VyIEZhY2Vib29rIENvb2tpZXMg4pa2ICcpLnN0cmlwKCkKICAgIGdlbiA9IEZhY2Vib29rVG9rZW5HZW5lcmF0b3IoJzI3NTI1NDY5MjU5ODI3OScsICczNTA2ODU1MzE3MjgnLCBjb29raWUpCiAgICBnZW4uR2V0VG9rZW4oKQogICAgaW5wdXQoIlByZXNzIEVudGVyLi4uIikKCmRlZiBlYWFkX3ZpYV9jb29raWUoKToKICAgIGNvb2tpZSA9IGlucHV0KFN0eWxlLkJSSUdIVCArIElOUFVUX0NPTE9SICsgJ1vigKJdIEVudGVyIFlvdXIgRmFjZWJvb2sgQ29va2llIOKWtiAnKQogICAgdHJ5OgogICAgICAgIHVybCA9ICdodHRwczovL3d3dy5mYWNlYm9vay5jb20vZXZlbnRzX21hbmFnZXIyL292ZXJ2aWV3JwogICAgICAgIGhlYWRlcnMgPSB7J0Nvb2tpZSc6IGNvb2tpZSwgJ1VzZXItQWdlbnQnOiByYW5kb20uY2hvaWNlKFVTRVJfQUdFTlRTKX0KICAgICAgICByZXMgPSByZXF1ZXN0cy5nZXQodXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgdG9rZW5fbWF0Y2ggPSByZS5zZWFyY2gocid7ImFjY2Vzc1Rva2VuIjoiKEVBQWRcdyspIicsIHJlcy50ZXh0KQogICAgICAgIGlmIHRva2VuX21hdGNoOgogICAgICAgICAgICB0b2tlbiA9IHRva2VuX21hdGNoLmdyb3VwKDEpCiAgICAgICAgICAgIHByaW50KEdSRUVOICsgZiJb4pyTXSBFQUFkIFRva2VuIEZvdW5kOiB7dG9rZW59IikKICAgICAgICBlbHNlOgogICAgICAgICAgICBwcmludChSRUQgKyAiW+Kcl10gVG9rZW4gbm90IGZvdW5kIGluIGNvb2tpZSBzb3VyY2UuIikKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChSRUQgKyBmIlshXSBFcnJvcjoge2V9IikKICAgIGlucHV0KCJQcmVzcyBFbnRlci4uLiIpCgpkZWYgaW5zdGFfdG9rZW4oKToKICAgIHByaW50KENZQU4gKyAiSW5zdGFncmFtIFRva2VuIChpUGFkKSBFeHRyYWN0b3IiKQogICAgY29va2llcyA9IGlucHV0KFN0eWxlLkJSSUdIVCArIEZvcmUuWUVMTE9XICsgJ1vigKJdIEVudGVyIEZhY2Vib29rIENvb2tpZXMg4pa2ICcpLnN0cmlwKCkKICAgIGhlYWRlcnMgPSB7CiAgICAgICAgJ1VzZXItQWdlbnQnOiByYW5kb20uY2hvaWNlKFVTRVJfQUdFTlRTKSwKICAgICAgICAnQWNjZXB0LUVuY29kaW5nJzogJ2d6aXAsIGRlZmxhdGUsIGJyJywKICAgICAgICAnb3JpZ2luJzogJ2h0dHBzOi8vd3d3Lmluc3RhZ3JhbS5jb20nLAogICAgICAgICdyZWZlcmVyJzogJ2h0dHBzOi8vd3d3Lmluc3RhZ3JhbS5jb20vJywKICAgICAgICAnQ29va2llJzogY29va2llcwogICAgfQogICAgdHJ5OgogICAgICAgIHJlc3BvbnNlID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL3d3dy5pbnN0YWdyYW0uY29tL2FjY291bnRzL3NpZ251cC8iLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZmJfYXIgPSByZXNwb25zZS5oZWFkZXJzLmdldCgnZmItYXInKQogICAgICAgIGlmIGZiX2FyOgogICAgICAgICAgICAgcHJpbnQoR1JFRU4gKyBmIlvinJNdIEZCLUFSIEhlYWRlciBGb3VuZDoge2ZiX2FyfSIpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgIHByaW50KFJFRCArICJb4pyXXSBGQi1BUiBIZWFkZXIgTm90IEZvdW5kIikKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChSRUQgKyBmIkVycm9yOiB7ZX0iKQogICAgaW5wdXQoIlByZXNzIEVudGVyLi4uIikKCmRlZiBsb2dpbl90b2tlbl9tZW51KCk6CiAgICBlbWFpbCA9IGlucHV0KFN0eWxlLkJSSUdIVCArIEZvcmUuQ1lBTiArICdb4oC6XSBFbnRlciBFbWFpbC9Vc2VybmFtZSDilrYgJykKICAgIHBhc3N3b3JkID0gaW5wdXQoU3R5bGUuQlJJR0hUICsgRm9yZS5DWUFOICsgJ1vigLpdIEVudGVyIFBhc3N3b3JkIOKWtiAnKQogICAgdHJ5OgogICAgICAgIGRhdGEgPSB7CiAgICAgICAgICAgICdlbWFpbCc6IGVtYWlsLAogICAgICAgICAgICAncGFzc3dvcmQnOiBwYXNzd29yZCwKICAgICAgICAgICAgJ2NyZWRlbnRpYWxzX3R5cGUnOiAncGFzc3dvcmQnLAogICAgICAgICAgICAnZm9ybWF0JzogJ2pzb24nLAogICAgICAgICAgICAnZ2VuZXJhdGVfc2Vzc2lvbl9jb29raWVzJzogJzEnLAogICAgICAgICAgICAnbWV0aG9kJzogJ2F1dGgubG9naW4nLAogICAgICAgICAgICAnYWNjZXNzX3Rva2VuJzogJzM1MDY4NTUzMTcyOHw2MmY4Y2U5Zjc0YjEyZjg0YzEyM2NjMjM0MzdhNGEzMicKICAgICAgICB9CiAgICAgICAgciA9IHJlcXVlc3RzLnBvc3QoImh0dHBzOi8vYXBpLmZhY2Vib29rLmNvbS9tZXRob2QvYXV0aC5sb2dpbiIsIGRhdGE9ZGF0YSkKICAgICAgICByZXMgPSByLmpzb24oKQogICAgICAgIGlmICdhY2Nlc3NfdG9rZW4nIGluIHJlczoKICAgICAgICAgICAgcHJpbnQoR1JFRU4gKyBmIlvinJNdIFRva2VuOiB7cmVzWydhY2Nlc3NfdG9rZW4nXX0iKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHByaW50KFJFRCArIGYiW+Kcl10gRmFpbGVkOiB7cmVzLmdldCgnZXJyb3JfbXNnJyl9IikKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChSRUQgKyBmIkVycm9yOiB7ZX0iKQogICAgaW5wdXQoIlByZXNzIEVudGVyLi4uIikKCmRlZiBUb2tlbl9ieV8yZmEoKToKICAgIHByaW50KFlFTExPVyArICIyRkEgTG9naW4gaXMgY3VycmVudGx5IHNpbXBsaWZpZWQgdG8gc3RhbmRhcmQgbG9naW4gY2hlY2suIikKICAgIGxvZ2luX3Rva2VuX21lbnUoKQoKZGVmIGNvbW1lbnRfYnlfcGFnZSgpOgogICAgcHJpbnQoU3R5bGUuQlJJR0hUICsgRm9yZS5DWUFOICsgJ+KVreKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgScgKyBib2xkX3VuaWNvZGUoJyBQYWdlIFBvc3QgTG9hZGVyICcpICsgJ+KUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKVricpCiAgICB0b2tlbl9maWxlID0gaW5wdXQoU3R5bGUuQlJJR0hUICsgSU5QVVRfQ09MT1IgKyAnW+KAol0gRW50ZXIgUGFnZSBUb2tlbiBGaWxlIFBhdGgg4pa2ICcpCiAgICBwb3N0X2lkID0gaW5wdXQoU3R5bGUuQlJJR0hUICsgSU5QVVRfQ09MT1IgKyAnW+KAol0gRW50ZXIgRmFjZWJvb2sgUG9zdCBJRCDilrYgJykKICAgIGhhdGVyc19uYW1lID0gaW5wdXQoU3R5bGUuQlJJR0hUICsgSU5QVVRfQ09MT1IgKyAnW+KAol0gRW50ZXIgSGF0ZXJzIE5hbWUg4pa2ICcpCiAgICBjb21tZW50X2ZpbGUgPSBpbnB1dChTdHlsZS5CUklHSFQgKyBJTlBVVF9DT0xPUiArICdb4oCiXSBFbnRlciBDb21tZW50IEZpbGUgUGF0aCDilrYgJykKICAgIHRyeToKICAgICAgICBkZWxheSA9IGludChpbnB1dChTdHlsZS5CUklHSFQgKyBJTlBVVF9DT0xPUiArICdb4oCiXSBFbnRlciBUaW1lIERlbGF5IChTZWNvbmRzKSDilrYgJykpCiAgICBleGNlcHQ6CiAgICAgICAgZGVsYXkgPSA1CiAgICB2YWxpZF90b2tlbnMsIF8gPSB2YWxpZGF0ZV90b2tlbnModG9rZW5fZmlsZSkKICAgIGlmIG5vdCB2YWxpZF90b2tlbnM6CiAgICAgICAgcHJpbnQoU3R5bGUuQlJJR0hUICsgRm9yZS5SRUQgKyAnW+Kcl10gTm8gdmFsaWQgcGFnZSB0b2tlbnMgZm91bmQuJykKICAgICAgICByZXR1cm4KICAgIHRyeToKICAgICAgICB3aXRoIG9wZW4oY29tbWVudF9maWxlLCAncicpIGFzIGY6CiAgICAgICAgICAgIGNvbW1lbnRzID0gZi5yZWFkKCkuc3BsaXRsaW5lcygpCiAgICBleGNlcHQ6CiAgICAgICAgcmV0dXJuCiAgICBwb3N0X2NvbW1lbnRzKHZhbGlkX3Rva2VucywgcG9zdF9pZCwgaGF0ZXJzX25hbWUsIGNvbW1lbnRzLCBkZWxheSkKCmRlZiBjb29raWVzX2NoZWNrZXJfbWVudSgpOgogICAgcHJpbnQoWUVMTE9XICsgIlshXSBDb29raWUgQ2hlY2tlciIpCiAgICBjb29raWUgPSBpbnB1dCgiRW50ZXIgQ29va2llOiAiKQogICAgZWFhZF92aWFfY29va2llKCkKCmRlZiBzaG93X21lbnUoKToKICAgIHdoaWxlIFRydWU6CiAgICAgICAgYmFubmVyKCkKICAgICAgICBkaXNwbGF5X2JveGVzKCkKICAgICAgICBwcmludF9zdHlsaXNoX2xpbmUoKQogICAgICAgIHByaW50KFN0eWxlLkJSSUdIVCArIEZvcmUuQ1lBTiArICfila3ilIDilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIEnICsgYm9sZF91bmljb2RlKCcgPCBNRU5VID4gJykgKyAn4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSA4pWuJykKICAgICAgICBwcmludChTdHlsZS5CUklHSFQgKyBGb3JlLk1BR0VOVEEgKyAn4pSDICcgKyBTdHlsZS5CUklHSFQgKyBGb3JlLkdSRUVOICsgJ1swMV0nICsgYm9sZF91bmljb2RlKCcgRW5jcnlwdG9yJykubGp1c3QoNjIpICsgRm9yZS5NQUdFTlRBICsgJ+KUgycpCiAgICAgICAgcHJpbnQoU3R5bGUuQlJJR0hUICsgRm9yZS5NQUdFTlRBICsgJ+KUgyAnICsgU3R5bGUuQlJJR0hUICsgRm9yZS5HUkVFTiArICdbMDJdJyArIGJvbGRfdW5pY29kZSgnIENoZWNrIFRva2VuJykubGp1c3QoNjIpICsgRm9yZS5NQUdFTlRBICsgJ+KUgycpCiAgICAgICAgcHJpbnQoU3R5bGUuQlJJR0hUICsgRm9yZS5NQUdFTlRBICsgJ+KUgyAnICsgU3R5bGUuQlJJR0hUICsgRm9yZS5HUkVFTiArICdbMDNdJyArIGJvbGRfdW5pY29kZSgnIENoZWNrIENvb2tpZXMnKS5sanVzdCg2MikgKyBGb3JlLk1BR0VOVEEgKyAn4pSDJykKICAgICAgICBwcmludChTdHlsZS5CUklHSFQgKyBGb3JlLk1BR0VOVEEgKyAn4pSDICcgKyBTdHlsZS5CUklHSFQgKyBGb3JlLkdSRUVOICsgJ1swNF0nICsgYm9sZF91bmljb2RlKCcgRmV0Y2ggR2MgVUlEJykubGp1c3QoNjIpICsgRm9yZS5NQUdFTlRBICsgJ+KUgycpCiAgICAgICAgcHJpbnQoU3R5bGUuQlJJR0hUICsgRm9yZS5NQUdFTlRBICsgJ+KUgyAnICsgU3R5bGUuQlJJR0hUICsgRm9yZS5HUkVFTiArICdbMDVdJyArIGJvbGRfdW5pY29kZSgnIEdldCBQYWdlIFRva2VuJykubGp1c3QoNjIpICsgRm9yZS5NQUdFTlRBICsgJ+KUgycpCiAgICAgICAgcHJpbnQoU3R5bGUuQlJJR0hUICsgRm9yZS5NQUdFTlRBICsgJ+KUgyAnICsgU3R5bGUuQlJJR0hUICsgRm9yZS5HUkVFTiArICdbMDZdJyArIGJvbGRfdW5pY29kZSgnIFJ1biBQb3N0IExvYWRlcicpLmxqdXN0KDYyKSArIEZvcmUuTUFHRU5UQSArICfilIMnKQogICAgICAgIHByaW50KFN0eWxlLkJSSUdIVCArIEZvcmUuTUFHRU5UQSArICfilIMgJyArIFN0eWxlLkJSSUdIVCArIEZvcmUuR1JFRU4gKyAnWzA3XScgKyBib2xkX3VuaWNvZGUoJyBSdW4gQ29udm8gTG9hZGVyJykubGp1c3QoNjIpICsgRm9yZS5NQUdFTlRBICsgJ+KUgycpCiAgICAgICAgcHJpbnQoU3R5bGUuQlJJR0hUICsgRm9yZS5NQUdFTlRBICsgJ+KUgyAnICsgU3R5bGUuQlJJR0hUICsgRm9yZS5HUkVFTiArICdbMDhdJyArIGJvbGRfdW5pY29kZSgnIENvb2tpZXMgUG9zdCBMb2FkZXInKS5sanVzdCg2MikgKyBGb3JlLk1BR0VOVEEgKyAn4pSDJykKICAgICAgICBwcmludChTdHlsZS5CUklHSFQgKyBGb3JlLk1BR0VOVEEgKyAn4pSDICcgKyBTdHlsZS5CUklHSFQgKyBGb3JlLkdSRUVOICsgJ1swOV0nICsgYm9sZF91bmljb2RlKCcgR2V0IEVBQUQ2IFRva2VuICh2aWEgQ29va2llcyknKS5sanVzdCg2MikgKyBGb3JlLk1BR0VOVEEgKyAn4pSDJykKICAgICAgICBwcmludChTdHlsZS5CUklHSFQgKyBGb3JlLk1BR0VOVEEgKyAn4pSDICcgKyBTdHlsZS5CUklHSFQgKyBGb3JlLkdSRUVOICsgJ1sxMF0nICsgYm9sZF91bmljb2RlKCcgR2V0IEVhYWQgVG9rZW4gQnkgQ29va2llcyAoTm9ybWFsKScpLmxqdXN0KDYyKSArIEZvcmUuTUFHRU5UQSArICfilIMnKQogICAgICAgIHByaW50KFN0eWxlLkJSSUdIVCArIEZvcmUuTUFHRU5UQSArICfilIMgJyArIFN0eWxlLkJSSUdIVCArIEZvcmUuR1JFRU4gKyAnWzExXScgKyBib2xkX3VuaWNvZGUoJyBHZXQgRUFBQnd6IFRva2VuIEJ5IENvb2tpZXMgKGlQYWQpJykubGp1c3QoNjIpICsgRm9yZS5NQUdFTlRBICsgJ+KUgycpCiAgICAgICAgcHJpbnQoU3R5bGUuQlJJR0hUICsgRm9yZS5NQUdFTlRBICsgJ+KUgyAnICsgU3R5bGUuQlJJR0hUICsgRm9yZS5HUkVFTiArICdbMTJdJyArIGJvbGRfdW5pY29kZSgiIEdldCBFQUFBVSBUb2tlbiBCeSBGQiBMb2dpbiIpLmxqdXN0KDYyKSArIEZvcmUuTUFHRU5UQSArICfilIMnKQogICAgICAgIHByaW50KFN0eWxlLkJSSUdIVCArIEZvcmUuTUFHRU5UQSArICfilIMgJyArIFN0eWxlLkJSSUdIVCArIEZvcmUuR1JFRU4gKyAnWzEzXScgKyBib2xkX3VuaWNvZGUoJyBHZXQgRUFBRDYgVG9rZW4gKyBDb29raWVzIEJ5IDJGQScpLmxqdXN0KDYyKSArIEZvcmUuTUFHRU5UQSArICfilIMnKQogICAgICAgIHByaW50KFN0eWxlLkJSSUdIVCArIEZvcmUuTUFHRU5UQSArICfilIMgJyArIFN0eWxlLkJSSUdIVCArIEZvcmUuR1JFRU4gKyAnWzE0XScgKyBib2xkX3VuaWNvZGUoJyBSdW4gUG9zdCBMb2FkZXIgVXNpbmcgUGFnZSBJZCBUb2tlbicpLmxqdXN0KDYyKSArIEZvcmUuTUFHRU5UQSArICfilIMnKQogICAgICAgIHByaW50KFN0eWxlLkJSSUdIVCArIEZvcmUuTUFHRU5UQSArICfilIMgJyArIFN0eWxlLkJSSUdIVCArIEZvcmUuUkVEICsgJ1sxNV0nICsgYm9sZF91bmljb2RlKCcgRVhJVCcpLmxqdXN0KDYyKSArIEZvcmUuTUFHRU5UQSArICfilIMnKQogICAgICAgIHByaW50KFN0eWxlLkJSSUdIVCArIEZvcmUuQ1lBTiArICfilbDilIDilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIDila8nICsgU3R5bGUuUkVTRVRfQUxMKQogICAgICAgIHByaW50X3N0eWxpc2hfbGluZSgpCiAgICAgICAgY2hvaWNlID0gaW5wdXQoU3R5bGUuQlJJR0hUICsgSU5QVVRfQ09MT1IgKyAnWz9dIPCdl5bwnZe18J2XvPCdl7zwnZiA8J2XsiDwnZeU8J2XuyDwnZei8J2XvfCdmIHwnZe28J2XvPCdl7sg4pa2ICcpCiAgICAgICAgcHJpbnRfc3R5bGlzaF9saW5lKCkKICAgICAgICBpZiBjaG9pY2UgPT0gJzEnOiBFbmMoKQogICAgICAgIGVsaWYgY2hvaWNlID09ICcyJzogdG9rZW5fY2hlY2tlcigpCiAgICAgICAgZWxpZiBjaG9pY2UgPT0gJzMnOiBjb29raWVzX2NoZWNrZXJfbWVudSgpCiAgICAgICAgZWxpZiBjaG9pY2UgPT0gJzQnOiBmZXRjaF9nY19pbmZvKCkKICAgICAgICBlbGlmIGNob2ljZSA9PSAnNSc6IGV4dHJhY3RfcGFnZV90b2tlbnMoKQogICAgICAgIGVsaWYgY2hvaWNlID09ICc2Jzogc3RhcnRfbG9hZGVyKCkKICAgICAgICBlbGlmIGNob2ljZSA9PSAnNyc6IHN0YXJ0X2NvbnZvKCkKICAgICAgICBlbGlmIGNob2ljZSA9PSAnOCc6IFdhbGwoKQogICAgICAgIGVsaWYgY2hvaWNlID09ICc5JzogcnVuX3Rva2VuX2dlbmVyYXRvcigpCiAgICAgICAgZWxpZiBjaG9pY2UgPT0gJzEwJzogZWFhZF92aWFfY29va2llKCkKICAgICAgICBlbGlmIGNob2ljZSA9PSAnMTEnOiBpbnN0YV90b2tlbigpCiAgICAgICAgZWxpZiBjaG9pY2UgPT0gJzEyJzogbG9naW5fdG9rZW5fbWVudSgpCiAgICAgICAgZWxpZiBjaG9pY2UgPT0gJzEzJzogVG9rZW5fYnlfMmZhKCkKICAgICAgICBlbGlmIGNob2ljZSA9PSAnMTQnOiBjb21tZW50X2J5X3BhZ2UoKQogICAgICAgIGVsaWYgY2hvaWNlID09ICcxNSc6CiAgICAgICAgICAgIHByaW50KFJFRCArICJFeGl0aW5nLi4uIEdvb2RieWUhIikKICAgICAgICAgICAgc3lzLmV4aXQoKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHByaW50KFJFRCArICJJbnZhbGlkIE9wdGlvbiIpCiAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkKCmRlZiBtYWluKCk6CiAgICB0cnk6CiAgICAgICAgYmFubmVyKCkKICAgICAgICBkaXNwbGF5X2JveGVzKCkKICAgICAgICBwcmludF9zdHlsaXNoX2xpbmUoKQogICAgICAgIHVuaXF1ZV9rZXkgPSBnZXRfdW5pcXVlX2lkKCkKICAgICAgICBjaGVja19wZXJtaXNzaW9uKHVuaXF1ZV9rZXkpCiAgICAgICAgaWYgY2hlY2tfcGFzc3dvcmQoKToKICAgICAgICAgICAgc2hvd19tZW51KCkKICAgIGV4Y2VwdCBLZXlib2FyZEludGVycnVwdDoKICAgICAgICBwcmludChSRUQgKyAiXG5bIV0gVXNlciBJbnRlcnJ1cHRlZCIpCiAgICAgICAgc3lzLmV4aXQoKQoKaWYgX19uYW1lX18gPT0gJ19fbWFpbl9fJzoKICAgIG1haW4oKQ=='))